<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <title>EasiNote 前端回调测试</title>
</head>

<body>

    <h1>EasiNote 前端回调测试页面</h1>

    <div id="app">

        <div class="grid-content">
            <h3>1 执行通用回调 InvokeMethod</h3>
            <p>window.external.InvokeMethod(JSON.stringify({ "method": "实际方法名", "args": JSON.stringify({ "参数1": "值1",
                "参数2": "值2", "参数3": "值3" })}))</p>
            <h4>方法名</h4>
            <el-row type="flex" class="row-bg">
                <el-col :span="4">
                    <div class="grid-content bg-purple-light">
                        <el-input v-model="commonMethodName" placeholder="实际方法名"></el-input>
                    </div>
                </el-col>
            </el-row>

            <h4>参数</h4>

            <el-row class="row-bg" gutter="20">
                <el-col :span="4">
                    <div class="grid-content bg-purple-light">
                        <el-input v-model="commonMethodParamName1" placeholder="参数名1"></el-input>
                    </div>
                </el-col>

                <el-col :span="20">
                    <div class="grid-content bg-purple-light">
                        <el-input type="textarea" :rows="2" v-model="commonMethodParamValue1" placeholder="参数值1">
                        </el-input>
                    </div>
                </el-col>
            </el-row>

            <el-row class="row-bg" gutter="20">
                <el-col :span="4">
                    <div class="grid-content bg-purple-light">
                        <el-input v-model="commonMethodParamName2" placeholder="参数名2"></el-input>
                    </div>
                </el-col>

                <el-col :span="20">
                    <div class="grid-content bg-purple-light">
                        <el-input type="textarea" :rows="2" v-model="commonMethodParamValue2" placeholder="参数值2">
                        </el-input>
                    </div>
                </el-col>
            </el-row>

            <el-button type="primary" @click="invokeCommonMethod">执行</el-button>
        </div>

        </br>

        <div class="grid-content">
            <h3>2 执行自定义方法</h3>
            <p>window.external.{自定义方法}("参数1","参数2")</p>
            <h4>方法名</h4>
            <el-row type="flex" class="row-bg">
                <el-col :span="4">
                    <div class="grid-content bg-purple-light">
                        <el-input v-model="commonMethodName" placeholder="实际方法名"></el-input>
                    </div>
                </el-col>
            </el-row>

            <h4>参数</h4>

            <el-row class="row-bg" gutter="20">
                <el-col :span="20">
                    <div class="grid-content bg-purple-light">
                        <el-input type="textarea" :rows="2" v-model="commonMethodParamValue1" placeholder="参数值1">
                        </el-input>
                    </div>
                </el-col>
            </el-row>

            <el-row class="row-bg" gutter="20">
                <el-col :span="20">
                    <div class="grid-content bg-purple-light">
                        <el-input type="textarea" :rows="2" v-model="commonMethodParamValue2" placeholder="参数值2">
                        </el-input>
                    </div>
                </el-col>
            </el-row>

            <el-button type="primary" @click="invokeCustomMethod">执行</el-button>
        </div>

    </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/vue@2.6.12"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>

<script>
    function isEmpty(obj) {
        if (typeof obj == "undefined" || obj == null || obj == "") {
            return true;
        } else {
            return false;
        }
    }

    var app = new Vue({
        el: "#app",
        data: {
            commonMethodName: "",
            commonMethodParamName1: "",
            commonMethodParamValue1: "",
            commonMethodParamName2: "",
            commonMethodParamValue2: "",
        },
        methods: {
            
            invokeCommonMethod: function () {
                window.external.InvokeMethod(
                    JSON.stringify({
                        "method": commonInvokeMethod,
                        "args": JSON.stringify({
                            commonMethodParamName1: commonMethodParamValue1,
                            commonMethodParamName2: commonMethodParamValue2
                        })
                    })
                )
            },

            invokeCustomMethod: function () {
                let code = `window.external.${commonMethodName}()`;
                if (!isEmpty(commonMethodParamValue1)){
                    code = `window.external.${commonMethodName}(${commonMethodParamValue1})`;
                }
                if(!isEmpty(commonMethodParamValue2)){
                    code = `window.external.${commonMethodName}(${commonMethodParamValue1},${commonMethodParamValue2})`;
                }
                eval(code);
            }

        }
    });
</script>

</html>